--
-- Script was generated by Devart dbForge Studio 2019 for MySQL, Version 8.2.23.0
-- Product home page: http://www.devart.com/dbforge/mysql/studio
-- Script date 2020/3/30 18:26:38
-- Server version: 5.7.28
-- Client version: 4.1
--

-- 
-- Disable foreign keys
-- 
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;

-- 
-- Set SQL mode
-- 
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;

--
-- Set default database
--
USE oauth2;

--
-- Drop table `oauth_client_details`
--
DROP TABLE IF EXISTS oauth_client_details;

--
-- Drop table `undo_log`
--
DROP TABLE IF EXISTS undo_log;

--
-- Drop table `role_permission`
--
DROP TABLE IF EXISTS role_permission;

--
-- Drop table `oauth_permission_details`
--
DROP TABLE IF EXISTS oauth_permission_details;

--
-- Drop table `user_role`
--
DROP TABLE IF EXISTS user_role;

--
-- Drop table `oauth_role_details`
--
DROP TABLE IF EXISTS oauth_role_details;

--
-- Drop table `oauth_user_details`
--
DROP TABLE IF EXISTS oauth_user_details;

--
-- Set default database
--
USE oauth2;

--
-- Create table `oauth_user_details`
--
CREATE TABLE oauth_user_details (
  id int(10) NOT NULL AUTO_INCREMENT,
  username varchar(12) NOT NULL,
  password varchar(60) NOT NULL,
  account_locked int(1) NOT NULL DEFAULT 0,
  account_expired int(1) NOT NULL DEFAULT 0,
  add_user varchar(12) DEFAULT NULL,
  edit_user varchar(12) DEFAULT NULL,
  add_time datetime DEFAULT NULL,
  edit_time datetime DEFAULT NULL,
  is_deleted int(11) DEFAULT 0,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 1002,
AVG_ROW_LENGTH = 5461,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

--
-- Create index `username` on table `oauth_user_details`
--
ALTER TABLE oauth_user_details
ADD INDEX username (username);

--
-- Create table `oauth_role_details`
--
CREATE TABLE oauth_role_details (
  id int(10) NOT NULL AUTO_INCREMENT,
  name varchar(12) NOT NULL COMMENT '??',
  description varchar(16) DEFAULT NULL COMMENT '??',
  expression varchar(32) NOT NULL COMMENT '???',
  is_deleted int(1) DEFAULT 0 COMMENT '????',
  add_user varchar(12) DEFAULT NULL,
  edit_user varchar(12) DEFAULT NULL,
  add_time datetime DEFAULT NULL,
  edit_time datetime DEFAULT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 1025,
AVG_ROW_LENGTH = 8192,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

--
-- Create index `name` on table `oauth_role_details`
--
ALTER TABLE oauth_role_details
ADD INDEX name (name);

--
-- Create table `user_role`
--
CREATE TABLE user_role (
  id int(10) NOT NULL AUTO_INCREMENT,
  username varchar(12) NOT NULL,
  role_name varchar(12) NOT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AVG_ROW_LENGTH = 16384,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

--
-- Create index `rolename` on table `user_role`
--
ALTER TABLE user_role
ADD INDEX rolename (role_name);

--
-- Create foreign key
--
ALTER TABLE user_role
ADD CONSTRAINT user_role_ibfk_2 FOREIGN KEY (role_name)
REFERENCES oauth_role_details (name);

--
-- Create foreign key
--
ALTER TABLE user_role
ADD CONSTRAINT user_role_ibfk_3 FOREIGN KEY (username)
REFERENCES oauth_user_details (username);

--
-- Create table `oauth_permission_details`
--
CREATE TABLE oauth_permission_details (
  id int(10) NOT NULL AUTO_INCREMENT,
  name varchar(12) NOT NULL COMMENT '??',
  description varchar(16) NOT NULL COMMENT '??',
  expression varchar(32) NOT NULL COMMENT '???',
  is_deleted int(1) NOT NULL DEFAULT 0 COMMENT '????',
  PRIMARY KEY (id, name)
)
ENGINE = INNODB,
AUTO_INCREMENT = 2,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

--
-- Create index `name` on table `oauth_permission_details`
--
ALTER TABLE oauth_permission_details
ADD INDEX name (name);

--
-- Create table `role_permission`
--
CREATE TABLE role_permission (
  id int(10) NOT NULL AUTO_INCREMENT,
  role_name varchar(12) NOT NULL,
  permission_name varchar(12) NOT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

--
-- Create index `permissionname` on table `role_permission`
--
ALTER TABLE role_permission
ADD INDEX permissionname (permission_name);

--
-- Create index `rolename` on table `role_permission`
--
ALTER TABLE role_permission
ADD INDEX rolename (role_name);

--
-- Create foreign key
--
ALTER TABLE role_permission
ADD CONSTRAINT role_permission_ibfk_1 FOREIGN KEY (role_name)
REFERENCES oauth_role_details (name);

--
-- Create foreign key
--
ALTER TABLE role_permission
ADD CONSTRAINT role_permission_ibfk_2 FOREIGN KEY (permission_name)
REFERENCES oauth_permission_details (name);

--
-- Create table `undo_log`
--
CREATE TABLE undo_log (
  id bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'increment id',
  branch_id bigint(20) NOT NULL COMMENT 'branch transaction id',
  xid varchar(100) NOT NULL COMMENT 'global transaction id',
  context varchar(128) NOT NULL COMMENT 'undo_log context,such as serialization',
  rollback_info longblob NOT NULL COMMENT 'rollback info',
  log_status int(11) NOT NULL COMMENT '0:normal status,1:defense status',
  log_created datetime NOT NULL COMMENT 'create datetime',
  log_modified datetime NOT NULL COMMENT 'modify datetime',
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 11,
AVG_ROW_LENGTH = 8192,
CHARACTER SET utf8,
COLLATE utf8_general_ci,
COMMENT = 'AT transaction mode undo table';

--
-- Create index `ux_undo_log` on table `undo_log`
--
ALTER TABLE undo_log
ADD UNIQUE INDEX ux_undo_log (xid, branch_id);

--
-- Create table `oauth_client_details`
--
CREATE TABLE oauth_client_details (
  id int(11) NOT NULL AUTO_INCREMENT COMMENT '??',
  client_id varchar(48) NOT NULL COMMENT '????',
  resource_ids varchar(256) DEFAULT NULL COMMENT '?????(????)',
  client_secret varchar(256) DEFAULT NULL COMMENT '????(bcyt) ??',
  scope varchar(256) DEFAULT NULL COMMENT '??',
  authorized_grant_types varchar(256) DEFAULT NULL COMMENT '5?oauth????(authorization_code,password,refresh_token,client_credentials)',
  web_server_redirect_uri varchar(256) DEFAULT NULL COMMENT '???? ',
  authorities varchar(256) DEFAULT NULL COMMENT '??',
  access_token_validity int(11) DEFAULT NULL COMMENT 'access_token???',
  refresh_token_validity int(11) DEFAULT NULL COMMENT 'refresh_token???',
  additional_information varchar(4096) DEFAULT '{}' COMMENT '{}',
  autoapprove char(4) NOT NULL DEFAULT 'true' COMMENT '?????? ?-true',
  create_time datetime DEFAULT NULL,
  update_time datetime DEFAULT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 2,
AVG_ROW_LENGTH = 16384,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

-- 
-- Dumping data for table oauth_user_details
--
INSERT INTO oauth_user_details VALUES
(1001, 'root', '$2a$10$8GDX9JsIbt9ibzc7h/EXDeyHI/DwYNdTMjj92yl49tyybUtBofCeq', 0, 0, 'root', 'root', '2019-12-25 10:07:32', '2019-12-25 10:07:36', 0);

-- 
-- Dumping data for table oauth_role_details
--
INSERT INTO oauth_role_details VALUES
(1024, 'root4', 'root4', 'root4', NULL, NULL, NULL, NULL, NULL);

-- 
-- Dumping data for table oauth_permission_details
--
INSERT INTO oauth_permission_details VALUES
(1, 'p1', 'p1', 'p1', 0);

-- 
-- Dumping data for table user_role
--
-- Table oauth2.user_role does not contain any data (it is empty)

-- 
-- Dumping data for table undo_log
--
INSERT INTO undo_log VALUES
(9, 2032261460, '192.168.1.194:8091:2032261456', 'serializer=jackson', x'7B2240636C617373223A22696F2E73656174612E726D2E64617461736F757263652E756E646F2E4272616E6368556E646F4C6F67222C22786964223A223139322E3136382E312E3139343A383039313A32303332323631343536222C226272616E63684964223A323033323236313436302C2273716C556E646F4C6F6773223A5B226A6176612E7574696C2E41727261794C697374222C5B7B2240636C617373223A22696F2E73656174612E726D2E64617461736F757263652E756E646F2E53514C556E646F4C6F67222C2273716C54797065223A22494E53455254222C227461626C654E616D65223A226F617574685F757365725F64657461696C73222C226265666F7265496D616765223A7B2240636C617373223A22696F2E73656174612E726D2E64617461736F757263652E73716C2E7374727563742E5461626C655265636F72647324456D7074795461626C655265636F726473222C227461626C654E616D65223A226F617574685F757365725F64657461696C73222C22726F7773223A5B226A6176612E7574696C2E41727261794C697374222C5B5D5D7D2C226166746572496D616765223A7B2240636C617373223A22696F2E73656174612E726D2E64617461736F757263652E73716C2E7374727563742E5461626C655265636F726473222C227461626C654E616D65223A226F617574685F757365725F64657461696C73222C22726F7773223A5B226A6176612E7574696C2E41727261794C697374222C5B7B2240636C617373223A22696F2E73656174612E726D2E64617461736F757263652E73716C2E7374727563742E526F77222C226669656C6473223A5B226A6176612E7574696C2E41727261794C697374222C5B7B2240636C617373223A22696F2E73656174612E726D2E64617461736F757263652E73716C2E7374727563742E4669656C64222C226E616D65223A226964222C226B657954797065223A225072696D6172794B6579222C2274797065223A342C2276616C7565223A313038317D2C7B2240636C617373223A22696F2E73656174612E726D2E64617461736F757263652E73716C2E7374727563742E4669656C64222C226E616D65223A22757365726E616D65222C226B657954797065223A224E554C4C222C2274797065223A31322C2276616C7565223A22726F6F7433227D2C7B2240636C617373223A22696F2E73656174612E726D2E64617461736F757263652E73716C2E7374727563742E4669656C64222C226E616D65223A2270617373776F7264222C226B657954797065223A224E554C4C222C2274797065223A31322C2276616C7565223A2224326124313024334A3079574E52534D732E5357493933437142726575505076714B6339387359526A442F444C586C55376D7A4D3278782F77654557227D2C7B2240636C617373223A22696F2E73656174612E726D2E64617461736F757263652E73716C2E7374727563742E4669656C64222C226E616D65223A226163636F756E745F6C6F636B6564222C226B657954797065223A224E554C4C222C2274797065223A342C2276616C7565223A307D2C7B2240636C617373223A22696F2E73656174612E726D2E64617461736F757263652E73716C2E7374727563742E4669656C64222C226E616D65223A226163636F756E745F65787069726564222C226B657954797065223A224E554C4C222C2274797065223A342C2276616C7565223A307D2C7B2240636C617373223A22696F2E73656174612E726D2E64617461736F757263652E73716C2E7374727563742E4669656C64222C226E616D65223A226164645F75736572222C226B657954797065223A224E554C4C222C2274797065223A31322C2276616C7565223A6E756C6C7D2C7B2240636C617373223A22696F2E73656174612E726D2E64617461736F757263652E73716C2E7374727563742E4669656C64222C226E616D65223A22656469745F75736572222C226B657954797065223A224E554C4C222C2274797065223A31322C2276616C7565223A6E756C6C7D2C7B2240636C617373223A22696F2E73656174612E726D2E64617461736F757263652E73716C2E7374727563742E4669656C64222C226E616D65223A226164645F74696D65222C226B657954797065223A224E554C4C222C2274797065223A39332C2276616C7565223A6E756C6C7D2C7B2240636C617373223A22696F2E73656174612E726D2E64617461736F757263652E73716C2E7374727563742E4669656C64222C226E616D65223A22656469745F74696D65222C226B657954797065223A224E554C4C222C2274797065223A39332C2276616C7565223A6E756C6C7D2C7B2240636C617373223A22696F2E73656174612E726D2E64617461736F757263652E73716C2E7374727563742E4669656C64222C226E616D65223A2269735F64656C65746564222C226B657954797065223A224E554C4C222C2274797065223A342C2276616C7565223A307D5D5D7D5D5D7D7D5D5D7D', 0, '2020-01-09 01:56:20', '2020-01-09 01:56:20'),
(10, 2032262757, '192.168.1.194:8091:2032262745', 'serializer=jackson', x'7B2240636C617373223A22696F2E73656174612E726D2E64617461736F757263652E756E646F2E4272616E6368556E646F4C6F67222C22786964223A223139322E3136382E312E3139343A383039313A32303332323632373435222C226272616E63684964223A323033323236323735372C2273716C556E646F4C6F6773223A5B226A6176612E7574696C2E41727261794C697374222C5B7B2240636C617373223A22696F2E73656174612E726D2E64617461736F757263652E756E646F2E53514C556E646F4C6F67222C2273716C54797065223A22494E53455254222C227461626C654E616D65223A226F617574685F726F6C655F64657461696C73222C226265666F7265496D616765223A7B2240636C617373223A22696F2E73656174612E726D2E64617461736F757263652E73716C2E7374727563742E5461626C655265636F72647324456D7074795461626C655265636F726473222C227461626C654E616D65223A226F617574685F726F6C655F64657461696C73222C22726F7773223A5B226A6176612E7574696C2E41727261794C697374222C5B5D5D7D2C226166746572496D616765223A7B2240636C617373223A22696F2E73656174612E726D2E64617461736F757263652E73716C2E7374727563742E5461626C655265636F726473222C227461626C654E616D65223A226F617574685F726F6C655F64657461696C73222C22726F7773223A5B226A6176612E7574696C2E41727261794C697374222C5B7B2240636C617373223A22696F2E73656174612E726D2E64617461736F757263652E73716C2E7374727563742E526F77222C226669656C6473223A5B226A6176612E7574696C2E41727261794C697374222C5B7B2240636C617373223A22696F2E73656174612E726D2E64617461736F757263652E73716C2E7374727563742E4669656C64222C226E616D65223A226964222C226B657954797065223A225072696D6172794B6579222C2274797065223A342C2276616C7565223A313030387D2C7B2240636C617373223A22696F2E73656174612E726D2E64617461736F757263652E73716C2E7374727563742E4669656C64222C226E616D65223A226E616D65222C226B657954797065223A224E554C4C222C2274797065223A31322C2276616C7565223A22726F6F7433227D2C7B2240636C617373223A22696F2E73656174612E726D2E64617461736F757263652E73716C2E7374727563742E4669656C64222C226E616D65223A226465736372697074696F6E222C226B657954797065223A224E554C4C222C2274797065223A31322C2276616C7565223A22726F6F7433227D2C7B2240636C617373223A22696F2E73656174612E726D2E64617461736F757263652E73716C2E7374727563742E4669656C64222C226E616D65223A2265787072657373696F6E222C226B657954797065223A224E554C4C222C2274797065223A31322C2276616C7565223A22726F6F7433227D2C7B2240636C617373223A22696F2E73656174612E726D2E64617461736F757263652E73716C2E7374727563742E4669656C64222C226E616D65223A2269735F64656C65746564222C226B657954797065223A224E554C4C222C2274797065223A342C2276616C7565223A6E756C6C7D2C7B2240636C617373223A22696F2E73656174612E726D2E64617461736F757263652E73716C2E7374727563742E4669656C64222C226E616D65223A226164645F75736572222C226B657954797065223A224E554C4C222C2274797065223A31322C2276616C7565223A6E756C6C7D2C7B2240636C617373223A22696F2E73656174612E726D2E64617461736F757263652E73716C2E7374727563742E4669656C64222C226E616D65223A22656469745F75736572222C226B657954797065223A224E554C4C222C2274797065223A31322C2276616C7565223A6E756C6C7D2C7B2240636C617373223A22696F2E73656174612E726D2E64617461736F757263652E73716C2E7374727563742E4669656C64222C226E616D65223A226164645F74696D65222C226B657954797065223A224E554C4C222C2274797065223A39332C2276616C7565223A6E756C6C7D2C7B2240636C617373223A22696F2E73656174612E726D2E64617461736F757263652E73716C2E7374727563742E4669656C64222C226E616D65223A22656469745F74696D65222C226B657954797065223A224E554C4C222C2274797065223A39332C2276616C7565223A6E756C6C7D5D5D7D5D5D7D7D5D5D7D', 0, '2020-01-09 02:14:43', '2020-01-09 02:14:43');

-- 
-- Dumping data for table role_permission
--
-- Table oauth2.role_permission does not contain any data (it is empty)

-- 
-- Dumping data for table oauth_client_details
--
INSERT INTO oauth_client_details VALUES
(1, 'c1', 'wfe-user,wfe-user-provider,wfe-user-consumer', '$2a$10$CJs1fiDNrd3n2VABKl72NepLcWOGJh1XSP0h2zhEcJChdJRaJ5J2e', 'all', 'password,refresh_token,authorization_code,implicit,client_credentials', 'http://www.baidu.com', 'p1', 3600, 7200, '{}', 'true', NULL, NULL);

-- 
-- Restore previous SQL mode
-- 
/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;

-- 
-- Enable foreign keys
-- 
/*!40014 SET FOREIGN_KEY_CHECKS = @OLD_FOREIGN_KEY_CHECKS */;